<style type="text/css">
	#gridKeyRatios .k-grid-content{
	    overflow-y: hidden;
	}

	#gridKeyRatios .k-grid-header{
	    padding-right: 0px !important;
	    /*padding-bottom: 0px !important;*/
	}

	#gridKeyRatios .k-grid-header-wrap{
		margin-bottom: -6px;
	}
	.finance{
		text-align: left;
	}
</style>
<!-- BankingandOsSnapshot -->
	<script id="rowTemplateTop" type="text/x-kendo-tmpl">
	  <tr>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:TotalObligationPOS#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:TotalObligationEMI#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:CloseWithin3MonthPOS#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:CloseWithin3MonthEMI#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:PBSLPOS#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:PBSLEMI#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:BalancePOS#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:BalanceEMI#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:TCLPOS#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:TCLEMI#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:X10IntObligation#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:SumExtenalYearly#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:YearlyRepayment#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:SumBounces#</span>
	      </td>
	      <td role="grid-cell" style="text-align: right; background: rgb(238, 238, 238); white-space: normal; white-space: normal; word-break: break-all !important; word-wrap: break-word !important;">
	      	<span>#:DpdMaxTrack#</span>
	      </td>
	  </tr>
	</script>
<!-- end -->

<script type="text/javascript">
	var URLRender = function(){
		add_url = '?customerid='+r.customerId().split('|')[0]+'&dealno='+r.customerId().split('|')[1]

    linkADForm = '<a target="_blank" href="/accountdetail/default'+add_url+'">Account Detail Form</a>'
    $('.linkADForm').html('')
    $('.linkADForm').append(linkADForm)

    linkInternalRTRForm = '<a target="_blank" href="/rtr/internalrtr'+add_url+'">Internal RTR Form</a>'
    $('.linkInternalRTRForm').html('')
    $('.linkInternalRTRForm').append(linkInternalRTRForm)

    linkCreditScoreCard = '<a target="_blank" href="/creditscorecard/new'+add_url+'">Credit Score Card</a>'
    $('.linkCreditScoreCard').html('')
    $('.linkCreditScoreCard').append(linkCreditScoreCard)

    linkDueDiligence = '<a target="_blank" href="/duediligence/form'+add_url+'">Due Diligence</a>'
    $('.linkDueDiligence').html('')
    $('.linkDueDiligence').append(linkDueDiligence)

    linkCibilForm = '<a target="_blank" href="/datacapturing/cibilnew'+add_url+'">CIBIL Form</a>'
    $('.linkCibilForm').html('')
    $('.linkCibilForm').append(linkCibilForm)

    linkKeyFinancialReport = '<a target="_blank" href="/ratio/pdf'+add_url+'">Key Financial Report</a>'
    $('.linkKeyFinancialReport').html('')
    $('.linkKeyFinancialReport').append(linkKeyFinancialReport)

    linkBankingAnalysis = '<a target="_blank" href="/bankanalysis/default'+add_url+'">Banking Analysis</a>'
    $('.linkBankingAnalysis').html('')
    $('.linkBankingAnalysis').append(linkBankingAnalysis)

    linkExternalRepaymentTrack = '<a target="_blank" href="/rtr/default'+add_url+'">External Repayment Track</a>'
    $('.linkExternalRepaymentTrack').html('')
    $('.linkExternalRepaymentTrack').append(linkExternalRepaymentTrack)

    linkLoanAprovalReport = '<a target="_blank" href="/loanapproval/default'+add_url+'">Loan Aproval Report</a>'
    $('.linkLoanAprovalReport').html('')
    $('.linkLoanAprovalReport').append(linkLoanAprovalReport)

    linkPromoter = '<a target="_blank" href="/loanapproval/default'+add_url+'#promback">Promoter Background</a>'
    $('.linkPromoter').html('')
    $('.linkPromoter').append(linkPromoter)

    linkProperty = '<a target="_blank" href="/loanapproval/default'+add_url+'#propown">Property Ownership Details</a>'
    $('.linkProperty').html('')
    $('.linkProperty').append(linkProperty)
  };

	var companyBackground = function(param, res) {
		console.log(param)
			var attr = {
	        topTable: {},
	        topCustomersName: ko.observableArray(),
	        topProducts: ko.observableArray()
	    }

	    attr.topTable.pdDone = param.accountsetupdetails.pdinfo.pddoneby;

	    var pddt = new Date(param.accountsetupdetails.pdinfo.pddate);
	    pddat = moment(pddt).format("DD/MM/YYYY");
	    attr.topTable.pdDate = pddat;

	    attr.topTable.pdPlace = param.accountsetupdetails.pdinfo.pdplace;
	    attr.topTable.personMet = param.accountsetupdetails.pdinfo.personmet;
	    if(!param.CMISNULL) {
	    	attr.topTable.pdCustomerMargin = param.accountsetupdetails.pdinfo.customermargin + "%";
	    } else {
	    	attr.topTable.pdCustomerMargin = "-"
	    }

	    attr.topTable.pdRemarks = param.accountsetupdetails.pdinfo.pdremarks;
	    attr.topTable.pdComments = param.accountsetupdetails.pdinfo.pdcomments;

	    loanapproval.companybackground([]);
	    loanapproval.companybackground.push(attr.topTable);
	    rendercompbacground(loanapproval.companybackground());

	    attr.mostLength = ko.computed(function() {
	        if(attr.topCustomersName().length > attr.topProducts().length)
	            return attr.topCustomersName()
	        else
	            return attr.topProducts()
	    })

        attr.isEmptyMostLength = ko.computed(function() {
            return attr.mostLength().length == 0
        })

        if(param.borrowerdetails.TopCustomerNames != undefined)
            attr.topCustomersName(_.compact(param.borrowerdetails.TopCustomerNames));
        else
            attr.topCustomersName(_.compact(param.borrowerdetails.topcustomernames));

        if(param.borrowerdetails.ProductNameandDetails != undefined)
            attr.topProducts(_.compact(param.borrowerdetails.ProductNameandDetails));
        else
            attr.topProducts(_.compact(param.borrowerdetails.productnameanddetails));

	    return attr
	}

	var createreferencecheckgrid = function(res){
	    $("#referencecheckgrid").html("");
	    $("#referencecheckgrid").kendoGrid({
	        dataSource : {
	            data : res,
	        },
			scrollable:false,
	        columns :
	        [
	            {
	                title : "Source",
	                headerAttributes: { "class": "sub-bgcolor col-sm-2" },
	                attributes: { "class": "col-sm-2" },
	                field : "source"
	            },
	            {
	                title : "Source Name",
	                headerAttributes: { "class": "sub-bgcolor" },
	                field : "sourcename"
	            },
	            {
	                title : "Reference Check By",
	                headerAttributes: { "class": "sub-bgcolor" },
	                field : "checkby"
	            },
	            {
	                title : "Positive/Negative",
	                headerAttributes: { "class": "sub-bgcolor" },
	                field : "ispositive"
	            },
	            {
	                title : "Brief Feedback Remark",
	                headerAttributes: { "class": "sub-bgcolor" },
	                field : "feedback"
	            },
	        ]
	    });
	}

// KeyParametersandIndicators ----------------------------------------------------
	var createKeyParametersandIndicators = function(norm) {
	    var DataTmp = []

	    var render = function(datas) {
	    	if(datas != null){
		        _.each(datas.filter(function (d) {
		            return d.ShowInLoanApprovalScreen
		        }), function(data) {
		            if(data.ShowInLoanApprovalScreen == true) {
			            if(data.CalculatedValue != undefined) {
			                var getFixedCalculatedValue = parseFloat((function () {
			                    return (function(val){
			                        if(data.CalculatedValue.ValueType == "percentage"|| data.ValueType  == "percentage")
			                            return val * 100;
			                        return val;
			                    })(data.CalculatedValue.Value)
			                })()).toFixed(2);

			                if(data.CalculatedValue.Value != 0) {
			                    if(data.CalculatedValue.ValueType == "percentage" || data.ValueType  == "percentage")
			                        data.calculatedvaluetodisplay = getFixedCalculatedValue + "%"
			                    else
			                        data.calculatedvaluetodisplay = getFixedCalculatedValue;
			                } else {
			                    // data.calculatedvaluetodisplay = "N/A"
			                    data.calculatedvaluetodisplay = data.CalculatedValue.Value
			                }

			                if(data.Operator == "min"){
			                    data.ismet = (getFixedCalculatedValue > data.Value1) ? "Met" : "Not Met";
			                } else if(data.Operator == "max"){
			                    data.ismet = (getFixedCalculatedValue < data.Value1) ? "Met" : "Not Met";
			                } else if(data.Operator == "greater than or equal"){
			                    data.ismet = (getFixedCalculatedValue >= data.Value1) ? "Met" : "Not Met";
			                } else if(data.Operator == "lower than or equal"){
			                    data.ismet = (getFixedCalculatedValue <= data.Value1) ? "Met" : "Not Met";
			                } else if(data.Operator == "equal"){
			                    data.ismet = (getFixedCalculatedValue == data.Value1) ? "Met" : "Not Met";
			                } else if(data.Operator == "between"){
			                    data.ismet = (getFixedCalculatedValue > data.Value1 && getFixedCalculatedValue < data.Value2) ? "Met" : "Not Met";
			                }
			            } else {
			                _.each(columns, function(column){
			                    column.field = column.field.toLowerCase();
			                })
			                data.calculatedvaluetodisplay = "No Internal Rating"
			                data.ismet = "No Internal Rating";
			            }

			            DataTmp.push(data);
			        }
		        })

		        $("#gridKeyParametersandIndicators").html("")
		        $("#gridKeyParametersandIndicators").kendoGrid({
		            dataSource : { data: DataTmp },
		            columns: [
						        { title: "Criteria", field: "Criteria", headerAttributes: { "class": "sub-bgcolor" }},
						        { title: "Norm", field: "NormLabel", headerAttributes: { "class": "sub-bgcolor" }, attributes: { "class": "center"} },
						        { title: "Actual", field: "calculatedvaluetodisplay", headerAttributes: { "class": "sub-bgcolor" }, attributes: { "class": "center"} },
						        { title: "Met / Not Met", field: "ismet", headerAttributes: { "class": "sub-bgcolor" }, attributes: { "class": "center"} }

						    ]
		        });
		    }
	    }

	    $(function () {
	        ajaxPost("/creditscorecard/getcscdata", getSearchVal(), function(cscData){

	            if(cscData.Data != undefined){
	            	var score = cscData.Data[0].FinalScore
	  				var rating = cscData.Data[0].FinalRating

	                // var score = _.sum(cscData.Data[0].Data.filter(function (d) {
	                //     return d.IsHeader
	                // }).map(function (d) {
	                //     return kendo.parseFloat(d.WeightScore)
	                // }));

	                // var rating = (function () {
	                //     if (score <= 4.5) {
	                //         return "XFL5"
	                //     } else if (score < 6) {
	                //         return "XFL4"
	                //     } else if (score < 7) {
	                //         return "XFL3"
	                //     } else if (score <= 8.5) {
	                //         return "XFL2"
	                //     } else {
	                //         return "XFL1"
	                //     }
	                // })();
	                loanapproval.internalrating(rating);

	                ajaxPost("/normmaster/getnormdata", {
	                    Internalrating: rating.replace("-",""),
	                    Customerid: filter().CustomerSearchVal(),
	                    Dealno: filter().DealNumberSearchVal()
	                }, function(param) {
	                    render(param.Data);
	                })
	            } else {
		                loanapproval.internalrating("");
	                	ajaxPost("/normmaster/getnormdata", {
	                    Internalrating: loanapproval.internalrating(),
	                    Customerid: filter().CustomerSearchVal(),
	                    Dealno: filter().DealNumberSearchVal()
	                }, function(param) {
	                    render(param.Data);
	                })
	            }
	        })
	    })
	}
//= End KeyParametersandIndicators ===============================================

// KeyFinancialRatios ------------------------------------------------------------
	var createKeyFinancialRatios = function(){
		var column = [
      { title: "Name", field: "name", width: 250, headerAttributes: { "class": "sub-bgcolor col-sm-2" }}
    ]
    var columnkey = [
      { title: "Name", field: "name", width: 150, headerAttributes: { "class": "sub-bgcolor col-sm-2" }}
    ]

		if( r.FR()[0].ColumnHeader().length > 2 ){
			_.each(r.FR()[0].ColumnHeader(),function(v,i){
			  if(i>0){
			  	column.push({ title: v.replace("(Audited)", ""), field: "v"+i, headerAttributes: { "class": "sub-bgcolor col-sm-2" }})
			  }
			})
		}

		 _.each(r.KRHEADER(),function(v,i){
		  				columnkey.push({ title: v.replace("(Audited)", ""), field: "v"+i, width: 30,headerAttributes: { "class": "sub-bgcolor col-sm-2" }})
		});

    // -------------- LeverageRatios -----------------------------
			var dataLeverageRatios = []
			if ( r.FR()[2].row().length > 2 ){
				_.each(r.FR()[2].row(),function(v,i){
				  var tmp = {}
				  tmp.name = v.rowData[0]
				  if(v.rowData.length > 4){
				    tmp.v1 = v.rowData[1]
				    tmp.v2 = v.rowData[2]
				    tmp.v3 = v.rowData[3]
				    tmp.v4 = v.rowData[4]
				  } else if(v.rowData.length > 3){
				    tmp.v1 = v.rowData[1]
				    tmp.v2 = v.rowData[2]
				    tmp.v3 = v.rowData[3]
				  } else if(v.rowData.length > 2){
				    tmp.v1 = v.rowData[1]
				    tmp.v2 = v.rowData[2]
				  } else{
				  	tmp.v1 = "N/A"
				    tmp.v2 = "N/A"
				  }
				  dataLeverageRatios.push(tmp)
				})
			}
			$("#gridLeverageRatios").html("")
	    $("#gridLeverageRatios").kendoGrid({
	        dataSource : { data: dataLeverageRatios },
	        scrollable: false,
	        columns: [{
		      	title:"Leverage Ratios",
		      	headerAttributes: { class: "header-bgcolor" },
						columns: column
					}]
	    });
    // -------------- End LeverageRatios -------------------------

    // -------------- OperatingRatios -----------------------------
			var dataOperatingRatios = []
			if ( r.FR()[5].row().length > 5 ){
				_.each(r.FR()[5].row(),function(v,i){
					if( i > 3 ){
					  var tmp = {}
					  tmp.name = v.rowData[0]
					  if(v.rowData.length > 4){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					    tmp.v3 = v.rowData[3]
					    tmp.v4 = v.rowData[4]
					  } else if(v.rowData.length > 3){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					    tmp.v3 = v.rowData[3]
					  } else if(v.rowData.length > 2){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					  } else{
					  	tmp.v1 = "N/A"
					    tmp.v2 = "N/A"
					  }
					  dataOperatingRatios.push(tmp)
					}
				})
			}
			$("#gridOperatingRatios").html("")
	    $("#gridOperatingRatios").kendoGrid({
	        dataSource : { data: dataOperatingRatios },
	        scrollable: true,
	        columns: [{
		      	title:"Operating Ratios",
		      	headerAttributes: { class: "header-bgcolor" },
						columns: column
					}]
	    });
    // -------------- End OperatingRatios -------------------------

    // -------------- CoverageRatios -----------------------------
			var dataCoverageRatios = []
			if ( r.FR()[3].row().length > 1 ){
				_.each(r.FR()[3].row(),function(v,i){
					  var tmp = {}
					  tmp.name = v.rowData[0]
					  if(v.rowData.length > 4){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					    tmp.v3 = v.rowData[3]
					    tmp.v4 = v.rowData[4]
					  } else if(v.rowData.length > 3){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					    tmp.v3 = v.rowData[3]
					  } else if(v.rowData.length > 2){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					  } else{
					  	tmp.v1 = "N/A"
					    tmp.v2 = "N/A"
					  }
					  dataCoverageRatios.push(tmp)
				})
			}
			$("#gridCoverageRatios").html("")
	    $("#gridCoverageRatios").kendoGrid({
	        dataSource : { data: dataCoverageRatios },
	        scrollable: false,
	        columns: [{
		      	title:"Coverage Ratios",
		      	headerAttributes: { class: "header-bgcolor" },
						columns: column
					}]
	    });
    // -------------- End CoverageRatios -------------------------

    // -------------- LiquidityRatios -----------------------------
			var dataLiquidityRatios = []
			if ( r.FR()[4].row().length > 0 ){
				_.each(r.FR()[4].row(),function(v,i){
					  var tmp = {}
					  tmp.name = v.rowData[0]
					  if(v.rowData.length > 4){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					    tmp.v3 = v.rowData[3]
					    tmp.v4 = v.rowData[4]
					  } else if(v.rowData.length > 3){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					    tmp.v3 = v.rowData[3]
					  } else if(v.rowData.length > 2){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					  } else{
					  	tmp.v1 = "N/A"
					    tmp.v2 = "N/A"
					  }
					  dataLiquidityRatios.push(tmp)
				})
			}
			$("#gridLiquidityRatios").html("")
	    $("#gridLiquidityRatios").kendoGrid({
	        dataSource : { data: dataLiquidityRatios },
	        scrollable: false,
	        columns: [{
		      	title:"Liquidity Ratios",
		      	headerAttributes: { class: "header-bgcolor" },
						columns: column
					}]
	    });
    // -------------- End LiquidityRatios -------------------------
    		var listignore = [];
    // -------------- KeyRatios -----------------------------
			var dataKeyRatios = []
			if ( r.FR()[6].row().length > 4 ){
				_.each(r.FR()[6].row(),function(v,i){
						// if(i > 1 && i < 5){
				  var tmp = {}
				  tmp.name = v.rowData[0]
				    _.each(r.KRHEADER(),function(v1,i1){
					   	tmp["v"+i1] = v.rowData[i1+1]
					 });


				  // if(v.rowData.length > 4){
				  //   tmp.v1 = v.rowData[1]
				  //   tmp.v2 = v.rowData[2]
				  //   tmp.v3 = v.rowData[3]
				  //   tmp.v4 = v.rowData[4]
				  // } else if(v.rowData.length > 3){
				  //   tmp.v1 = v.rowData[1]
				  //   tmp.v2 = v.rowData[2]
				  //   tmp.v3 = v.rowData[3]
				  // } else if(v.rowData.length > 2){
				  //   tmp.v1 = v.rowData[1]
				  //   tmp.v2 = v.rowData[2]
				  // } else{
				  // 	tmp.v1 = "N/A"
				  //   tmp.v2 = "N/A"
				  // }
						  // if(v.rowData.length > 4){
						  //   tmp.v1 = "N/A"
						  //   tmp.v2 = "N/A"
						  //   tmp.v3 = "N/A"
						  //   tmp.v4 = v.rowData[4]
						  // } else if(v.rowData.length > 3){
						  //   tmp.v1 = "N/A"
						  //   tmp.v2 = "N/A"
						  //   tmp.v3 = v.rowData[3]
						  // } else if(v.rowData.length > 2){
						  //   tmp.v1 = "N/A"
						  //   tmp.v2 = v.rowData[2]
						  // } else{
						  // 	tmp.v1 = "N/A"
						  //   tmp.v2 = "N/A"
						  // }
						  dataKeyRatios.push(tmp)
					  // }
				})
			}

				var colcount = r.KRHEADER().length;
				var isvalid = false;
				var cleanit = false;
				for(;colcount>-1;){
					cleanit = false;
					if(!isvalid){
					dataKeyRatios.forEach(function(x){
							if(x["v"+(colcount-1)] == 0){
								cleanit = true;
						}
					});
					}
					if(cleanit){
						dataKeyRatios.forEach(function(x){
									x["v"+(colcount-1)] = "N/A"
								});
					}

					if(isvalid){
						dataKeyRatios.forEach(function(x){
							x["v"+(colcount-1)] = "N/A"
						});
					}
					if(!cleanit){
						isvalid = true;
					}
					colcount=colcount-1;
				}

			$("#gridKeyRatios").html("")
	    $("#gridKeyRatios").kendoGrid({
	        dataSource : { data: dataKeyRatios },
	        scrollable: true,
	        columns: [{
		      	title:"Key Ratios",
		      	headerAttributes: { class: "header-bgcolor" },
						columns: columnkey
					}]
	    });
    // -------------- End KeyRatios -------------------------
	}
//= End KeyFinancialRatios =======================================================

// KeyFinancialParameters --------------------------------------------------------
	var createKeyFinancialParameters = function(){
		var column = [
      { title: "Name", field: "name", width: 250, headerAttributes: { "class": "sub-bgcolor col-sm-2" } , template : function(x) {
      		var ishead = true;
      		_.each(r.KFI()[0].ColumnHeader(),function(v,i){
			  if(i>0){
			  	if(x["v"+i].trim() !=""){
			  		ishead = false;
			  	}
			  }
			})
      		if(ishead){
      			return "<label style=\"font-weight:bold!important;\">"+ x.name +"</label>"
      		}
      		return "<label>"+ x.name +"</label>"
      } }
    ]

		if( r.KFI()[0].ColumnHeader().length > 2 ){
			_.each(r.KFI()[0].ColumnHeader(),function(v,i){
			  if(i>0){
			  	column.push({ title: v.replace("(Audited)", ""), field: "v"+i, headerAttributes: { "class": "sub-bgcolor col-sm-2" }})
			  }
			})
		}

		// -------------- PnL -----------------------------
			var dataPnL = []
			if ( r.KFI()[0].row().length > 2 ){
				_.each(r.KFI()[0].row(),function(v,i){
				  if(i != 5 && i != 6){
					  var tmp = {}
					  tmp.name = v.rowData[0]
					  if(v.rowData.length > 4){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					    tmp.v3 = v.rowData[3]
					    tmp.v4 = v.rowData[4]
					  } else if(v.rowData.length > 3){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					    tmp.v3 = v.rowData[3]
					  } else if(v.rowData.length > 2){
					    tmp.v1 = v.rowData[1]
					    tmp.v2 = v.rowData[2]
					  } else{
					  	tmp.v1 = "N/A"
					    tmp.v2 = "N/A"
					  }
					  dataPnL.push(tmp)
				  }
				})
			}
			$("#gridPnL").html("")
	    $("#gridPnL").kendoGrid({
	        dataSource : { data: dataPnL },
	        scrollable: false,
	        columns: [{
		      	title:"P & L",
		      	headerAttributes: { class: "header-bgcolor" },
				columns: column
			}]
	    });
    // -------------- End PnL -------------------------

    // -------------- BalanceSheet -----------------------------
			var dataBalanceSheet = []
			if ( r.KFI()[1].row().length > 2 ){
				listArray = [8, 13, 15, 0, 4, 1, 5]
				_.each(listArray,function(v,i){
					var tmp = {}
					tmp.name = r.KFI()[1].row()[v].rowData[0]

					if(v == 8 || v == 0){
						tmp.v1 = " "
					    tmp.v2 = " "
					    tmp.v3 = " "
					    tmp.v4 = " "
					} else{
					  if(r.KFI()[1].row()[v].rowData.length > 4){
					    tmp.v1 = r.KFI()[1].row()[v].rowData[1]
					    tmp.v2 = r.KFI()[1].row()[v].rowData[2]
					    tmp.v3 = r.KFI()[1].row()[v].rowData[3]
					    tmp.v4 = r.KFI()[1].row()[v].rowData[4]
					  } else if(r.KFI()[1].row()[v].rowData.length > 3){
					    tmp.v1 = r.KFI()[1].row()[v].rowData[1]
					    tmp.v2 = r.KFI()[1].row()[v].rowData[2]
					    tmp.v3 = r.KFI()[1].row()[v].rowData[3]
					  } else if(r.KFI()[1].row()[v].rowData.length > 2){
					    tmp.v1 = r.KFI()[1].row()[v].rowData[1]
					    tmp.v2 = r.KFI()[1].row()[v].rowData[2]
					  } else{
					  	tmp.v1 = "N/A"
					    tmp.v2 = "N/A"
					  }
					}
					dataBalanceSheet.push(tmp)
				})
			}
			$("#gridBalanceSheet").html("")
	    $("#gridBalanceSheet").kendoGrid({
	        dataSource : { data: dataBalanceSheet },
	        scrollable: false,
	        columns: [{
		      	title:"Balance Sheet",
		      	headerAttributes: { class: "header-bgcolor" },
				columns: column,
			}]
	    });
    // -------------- End BalanceSheet -------------------------
	}
//= End KeyFinancialParameters ===================================================

// PromoterandManagementDetails --------------------------------------------------
	var createCibilDetails = function(datass){
		$("#gridCibilDetails").html("");
		$("#gridCibilDetails").kendoGrid({
			dataSource: {
				data:  datass,
				schema:{
					model:{
						id: "Name",
						fields: {
							promotername:{editable: true,},
							Designation:{editable: true},
							ShareHolding:{type: "number", editable: true, min: 1, spinner: false},
							cibilscore:{type: "number", editable: true, min: 1},
							RedFlags:{editable: true},
						}
					}
				}
			},
	        scrollable: false,
			columns : [{
				title:"CIBIL Details",
				headerAttributes: { class: "header-bgcolor" },
				columns:[
					{
						field: "promotername",
						title: "Name",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 100,
					},
					{
						field: "cibilscore",
						title: "CIBIL Score",
						headerAttributes: { "class": "sub-bgcolor" },
						attributes: { "class": "text-center" },
						width: 100,
					}

				],
			}]
		});
	}

	var createRedFlags = function(){
		$("#gridRedFlags").html("");
		$("#gridRedFlags").kendoGrid({
			dataSource: {
				data:  redflags(),
				schema:{
					model:{
						id: "Name",
						fields: {
							Name:{editable: true,},
							Designation:{editable: true},
							ShareHolding:{type: "number", editable: true, min: 1, spinner: false},
							CIBILScore:{type: "number", editable: true, min: 1},
							RedFlags:{editable: true},
						}
					}
				}
			},
	        scrollable: false,
			columns : [{
				title:"Red Flags",
				headerAttributes: { class: "header-bgcolor" },
				columns:[
					{
						field: "Name",
						title: "Name",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 50,
					},
					{
						field: "RedFlags",
						title: "Details",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 100,
					}

				],
			}]
		});
	}

	var createMainPromotorDetails = function(datass){
		_.each(datass, function(v,i){
			datass[i].countrealestateposition = v.realestateposition.reduce((a, b) => a + b, 0)
		})

		$("#gridMainPromotorDetails").html("");
		$("#gridMainPromotorDetails").kendoGrid({
			dataSource: {
				data:  datass,
				schema:{
					model:{
						id: "Name",
						fields: {
							Name:{editable: true,},
							Designation:{editable: true},
							ShareHolding:{type: "number", editable: true, min: 1, spinner: false},
							CIBILScore:{type: "number", editable: true, min: 1},
							RedFlags:{editable: true},
						}
					}
				}
			},
	        scrollable: false,
			columns : [{
				title:"Main Promoter Details",
				headerAttributes: { class: "header-bgcolor" },
				columns:[
					{
						field: "promotername",
						title: "Main Promoter Names",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 200,
					},
					{
						field: "experienceinsamelineofbusiness",
						title: "Experience in the same line of business",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 100,
					},
					{
						field: "educationalqualificationofmainpromoter",
						title: "Educational Qualification of main promoter",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 250,
					},
					{
						field: "resiownershipstatus",
						title: "Residence Ownership Status",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 100,
					},
					{
						field: "officeownershipstatus",
						title: "Office Ownership Status",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 100,
					},
					{
						field: "countrealestateposition",
						title: "Real Estate Position (Rs Lacs)",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 100,
					},
				],
			}]
		});
	}
//= End PromoterandManagementDetails =============================================

// BankingandOsSnapshot ----------------------------------------------------------
	function createBankingandOsSnapshot(res,allsum){
		createBankingDetails(res,allsum)
		createOutstandingDebt();
	}

	var createBankingDetails = function(res,allsum){
		var multiplyer = 0;

    	if(r.AllData().Data.AD.length > 0)
			var customermargin = r.AllData().Data.AD[0].accountsetupdetails.pdinfo.customermargin

        if (r.rootdates().length != 0){
            idxlatestaudited = _.findLastIndex(r.rootdates(),['Status','AUDITED'])
            latestauditeddate = r.rootdates()[idxlatestaudited].Date
            ebitdamargin = _.find(r.rootdata(),{'FieldAlias':"EBITDAMARGIN"})
            var latestebidmargin = _.find(ebitdamargin.Values,{'Date':latestauditeddate}).Value
            // var multiplyer = _.min([latestebidmargin,customermargin])
            var multiplyer = allsum.BSIMarginPercent

            for (var i = 0 ; i < res.length ; i++){
                res[i].ImpMargin = multiplyer*res[i].TotalCredit
            }
            // createBankingGrid(res.data.Summary,multiplyer);
        }
        // else{
        //     createBankingGrid(res.data.Summary,0);
        // }


	    for(var i in res){
	        res[i]["Month"] = moment(res[i]["Month"].split("T")[0]).format("MMM-YYYY")
	    }
	    $("#gridBankingDetails").html("");
	    $("#gridBankingDetails").kendoGrid({
	        dataSource : {
				data : res,
	            aggregate: [
	                { field: "TotalCredit", aggregate: "sum" },
	                { field: "TotalDebit", aggregate: "sum" },
	                { field: "NoOfDebit", aggregate: "sum" },
	                { field: "NoOfCredit", aggregate: "sum" },
	                { field: "OwCheque", aggregate: "sum" },
	                { field: "IwCheque", aggregate: "sum" },
	                { field: "Utilization", aggregate: "average" },
	                { field: "ImpMargin", aggregate: "sum" },
	                { field: "OwReturnPercentage", aggregate: "average" },
	                { field: "LwReturnPercentage", aggregate: "average" },
	                { field: "DrCrReturnPercentage", aggregate: "average" },
	            ]
			},
	        scrollable: true,
	        columns : [{
	            title:"Banking Details",
	            headerAttributes: { class: "header-bgcolor" },
	            columns:[{
	                title:"Months",
	                field:"Month",
	                headerAttributes: { class: "sub-bgcolor" },
	                format:"{0:dd-MMM-yyyy}",
	                footerTemplate: 'Total'
	            }, {
	                title:"Monthly Credits",
	                field:"TotalCredit",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                footerTemplate: "<div style='text-align: right'> #= app.formatnum(sum, 2) # </div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: app.formatnum(TotalCredit,2) #"
	            }, {
	                title:"Monthly Debits",
	                field:"TotalDebit",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                footerTemplate: "<div style='text-align: right'>#= app.formatnum(sum, 2) #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: app.formatnum(TotalDebit,2) #"
	            }, {
	                title:"No. of Debits",
	                field:"NoOfDebit",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                footerTemplate: "<div style='text-align: right'>#= kendo.toString(sum, 'n0') #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: kendo.toString(NoOfDebit,'N0') #"
	            }, {
	                title:"No. of Credits",
	                field:"NoOfCredit",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                footerTemplate: "<div style='text-align: right'>#= kendo.toString(sum, 'n0') #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: kendo.toString(NoOfCredit,'N0') #"
	            }, {
	                title:"O/W Cheque Returns",
	                field:"OwCheque",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                footerTemplate: "<div style='text-align: right'>#= kendo.toString(sum, 'n0') #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: kendo.toString(OwCheque,'N0') #"
	            }, {
	                title:"I/W Cheque Returns",
	                field:"IwCheque",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                footerTemplate: "<div style='text-align: right'>#= kendo.toString(sum, 'n0') #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: kendo.toString(IwCheque,'N0') #"
	            }, {
	                title:"Utilization %",
	                field:"Utilization",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["average"],
	                footerTemplate: "<div style='text-align: right'>#= kendo.toString(average, 'P1') #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: kendo.toString(Utilization,'P2') #"
	            }, {
	                title:"Imp Margin <br> (Margin Taken : "+ kendo.toString(multiplyer*100,"n2") +"%)",
	                field:"ImpMargin",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                width:150,
	                footerTemplate: "<div style='text-align: right'>#= kendo.toString("+ allsum.BSImpMargin +", 'n2') #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: app.formatnum(ImpMargin,2) #"
	            }, {
	                title:"O/W Return %",
	                field:"OwReturnPercentage",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                footerTemplate: "<div style='text-align: right'>#= kendo.toString("+ allsum.BSOWReturnPercent +", 'P2') #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: kendo.toString(OwReturnPercentage,'P2') #"
	            }, {
	                title:"I/w return %",
	                field:"LwReturnPercentage",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                footerTemplate: "<div style='text-align: right'>#= kendo.toString("+ allsum.BSIWReturnPercent +", 'P2') #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: kendo.toString(LwReturnPercentage,'P2') #"
	            }, {
	                title:"Dr./Cr. Ratio",
	                field:"DrCrReturnPercentage",
	                headerAttributes: { class: "sub-bgcolor" },
	                aggregates: ["sum"],
	                footerTemplate: "<div style='text-align: right'>#= kendo.toString("+ allsum.BSDRCRRatio +", 'N2') #</div>",
	                attributes:{ "style": "text-align:right" },
	                template : "#: kendo.toString(DrCrReturnPercentage,'N2') #"
	            }]
	        }],
	    });
	}

	var createOutstandingDebt = function(){
		callData = {}
	  callData["customerid"] = filter().CustomerSearchVal()
	  callData["dealno"] = filter().DealNumberSearchVal()

	  ajaxPost("/rtr/getdatabottomgrid",callData, function(res){

	      if(res.message != "") {
	          swal("Warning","Data Outstanding Debt Not Found","warning");
	          return
	      }

	      if (res.data[0].data.length == 0){
	      	return
	      }
	    //   console.log("asdfasdfasfd", function(){
					// 	src = {}
					// 	doit = function(_do, _it) { src[_it] = _do }
					// 	_.each(res.data[0].data[0], doit)
					// 	_.each(res.data[1].summary, doit);
					// 	return src
					// }());
	      $("#gridOutstandingDebt").kendoGrid({
				dataSource : {
					data : [function(){
						src = {}
						doit = function(_do, _it) { src[_it] = _do }
						_.each(res.data[0].data[0], doit)
						_.each(res.data[1].summary, doit);
						return src
					}()]
				},
        		scrollable: true,
				columns : [{
            		title:"Outstanding Debt",
            		headerAttributes: { class: "header-bgcolor" },
					columns : [{
						title : "Total Obligations",
						headerAttributes: { "class": "sub-bgcolor" },
						width: 100,
						columns : [{
							title : "POS (Rs lacs)",
							field : "TotalObligationPOS",
							headerAttributes: { "class": "sub-bgcolor" },
							width: 90,
							attributes: {
								"class": "text-center",
								style: 'background: rgb(238, 238, 238)'
							}
						}, {
							field : "TotalObligationEMI",
							headerAttributes: { "class": "sub-bgcolor" },
							title : "EMI (Rs lacs)",
							width: 90,
							attributes: { style: 'background: rgb(238, 238, 238)' }
						}]
					}, {
						title : "Close Within 3 Month",
						columns : [
							{ field : "CloseWithin3MonthPOS", headerAttributes: { "class": "sub-bgcolor" }, title : "POS (Rs lacs)", width: 90, attributes: { style: 'background: rgb(238, 238, 238)' }  },
							{ field : "CloseWithin3MonthEMI", headerAttributes: { "class": "sub-bgcolor" }, title : "EMI (Rs lacs)", width: 90, attributes: { style: 'background: rgb(238, 238, 238)' }  },
						],
						width: 100, headerAttributes: { "class": "sub-bgcolor" }
					}, { title : "P.B.S.L",
							columns : [
								{ field : "PBSLPOS", headerAttributes: { "class": "sub-bgcolor" }, title : "POS (Rs lacs)", width: 90, attributes: { style: 'background: rgb(238, 238, 238)' }  },
								{ field : "PBSLEMI", headerAttributes: { "class": "sub-bgcolor" }, title : "EMI (Rs lacs)", width: 90, attributes: { style: 'background: rgb(238, 238, 238)' }  },
							],
							width: 100, headerAttributes: { "class": "sub-bgcolor" }
						},
						{ title : "Balance Transfer",
							columns : [
								{ field : "BalancePOS", headerAttributes: { "class": "sub-bgcolor" }, title : "POS (Rs lacs)", width: 90, attributes: { style: 'background: rgb(238, 238, 238)' }  },
								{ field : "BalanceEMI", headerAttributes: { "class": "sub-bgcolor" }, title : "EMI (Rs lacs)", width: 90, attributes: { style: 'background: rgb(238, 238, 238)' }  },
							],
							width: 100, headerAttributes: { "class": "sub-bgcolor" }
						},
						{ title : "Total Considered Liability",
							columns : [
								{ field : "TCLPOS", headerAttributes: { "class": "sub-bgcolor" }, title : "POS (Rs lacs)", width: 90, attributes: { style: 'background: rgb(238, 238, 238)' }  },
								{ field : "TCLEMI", title : "EMI (Rs lacs)", width: 100, headerAttributes: { "class": "sub-bgcolor" },attributes: { style: 'background: rgb(238, 238, 238)' }  },
							],
							width: 60, headerAttributes: { "class": "sub-bgcolor" }
						 },
						{ field : "X10IntObligation", title : "X10 Int. Obligation (Rs)", headerAttributes: { "class": "sub-bgcolor" } , width: 130, attributes: { style: 'background: rgb(238, 238, 238)' } },
						{ field : "SumExtenalYearly", title : "External Yearly Repayment (Rs. Lacs) incl. X10 Int", headerAttributes: { "class": "sub-bgcolor" } , width: 130, attributes: { style: 'background: rgb(238, 238, 238)' } },
						{ field : "YearlyRepayment", title : "External Yearly Repayment (Rs. Lacs)", headerAttributes: { "class": "sub-bgcolor" }, width: 130, attributes: { style: 'background: rgb(238, 238, 238)', class: "wrap" } },
						{ field : "SumBounces", title : "EMI Bounces Last 6 Months", headerAttributes: { "class": "sub-bgcolor" }, width: 130, attributes: { style: 'background: rgb(238, 238, 238)' } },
						{ field : "DpdMaxTrack", title : "Max. of DPD Track", headerAttributes: { "class": "sub-bgcolor" }, width: 130, attributes: { style: 'background: rgb(238, 238, 238)' } },
					],
				}],
				rowTemplate: kendo.template($("#rowTemplateTop").html())
			});
	  })
	}
//= End BankingandOsSnapshot =====================================================
</script>
<style type="text/css">
    .summary{
        padding-left : 10px;
    }
	h3{
		font-size: 16px;
	}
	.k-grid-footer{
		padding: 0 !important;
	}
	.no-padding{
		padding-left : 0px;
		padding-right : 0px;
	}
	.summary{
		padding-left : 10px;
	}

	.payment-table tr td {
		white-space: nowrap !important;
	}

	.center, .text-center {
	    text-align: center;
	}

    #tab0 {
      font-size: 11px;
    }
    .k-grid table {
      margin-bottom: 5px;
      color: #444;
    }
    .k-grid table td {
      background-color: white;
    }

    .k-grid-header .k-header {
      color: #444;
    }
    .table-divider {
      width: 1% !important;
      border: none !important;
      background-color: #fafafa !important;
    }
    .dummy-td {
      border: none !important;
      background-color: #fafafa !important;
    }
    .k-grid td {
      white-space: normal !important;
    }
    .k-widget {
      border: none !important;
    }
    .text-bold {
      font-weight: bold !important;
    }
    .k-grid tr td {
      border-width: 1px !important;
    }
    .center, .text-center {
      text-align: center;
    }

    textarea {
        resize: none;
    }
    .k-grid  .k-grid-header  .k-header  .k-link {
	    height: auto;
	}

	.k-grid  .k-grid-header  .k-header {
	    white-space: normal;
	}

	#gridOutstandingDebt .k-grid-header,
	#gridBankingDetails .k-grid-header{
	   padding: 0 !important;
	}

	#gridOutstandingDebt .k-grid-content,
	#gridBankingDetails .k-grid-content{
	   overflow-y: visible;
	}

	td { white-space: normal!important; }
    td {
        /*word-break: break-all !important;*/
        word-wrap: break-word !important;
  	}

</style>

<ul class="collapsible" data-collapsible="accordion" id="lsb">
  <li>
    <div class="collapsible-noreplace header-bgcolor ">
      <i class="fa fa-list"></i>Account Details<i class="fa fa-chevron-down pull-right"></i>
    </div>
    <div class="collapsible-body row">
      <div class="col-sm-12">
        <div class="container-fluid">
		    <div class="row">
		        <div class="col-sm-12">
		            <div class="k-grid">
		                <table class="custom-label table-bordered">
		                    <tr>
		                        <td class="col-sm-2 text-bold">Company Name</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.companyname"></span></td>
		                        <td class="table-divider"></td>
		                        <td class="col-sm-2 text-bold">Login Date</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.logindate"></span></td>
		                    </tr>
		                    <tr>
		                        <td class="col-sm-2 text-bold">Business Address</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.businessaddress"></span></td>
		                        <td class="table-divider"></td>
		                        <td class="col-sm-2 text-bold">Location</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.location"></span></td>
		                    </tr>
		                    <tr>
		                        <td class="col-sm-2 text-bold">Product</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.product"></span></td>
		                        <td class="table-divider"></td>
		                        <td class="col-sm-2 text-bold">Lead Distributor</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.leaddistributor"></span></td>
		                    </tr>
		                 <!--    <tr>
		                        <td class="col-sm-2 text-bold">Business Segment</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.businesssegment"></span></td>
		                        <td class="table-divider"></td>
		                        <td class="col-sm-2 text-bold">Business Since</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.businesssince"></span></td>
		                    </tr> -->
		                    <tr>
		                      <!--   <td class="col-sm-2 text-bold">Internal Rating</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.internalrating"></span></td>
		                        <td class="table-divider"></td> -->
		                        <td class="col-sm-2 text-bold">RM Name</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.rmname"></span></td>
		                        <td class="table-divider"></td>
		                        <td class="col-sm-2 text-bold">Credit Analyst</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.creditanalyst"></span></td>
		                    </tr>
		                    <tr>
		                       	<td class="col-sm-2 text-bold">BR Head</td>
		                        <td class="col-sm-4"><span data-bind="text:loanapproval.brhead"></span></td>
		                        <td class="table-divider"></td>
		                        <td class="col-sm-2 text-bold">Scheme</td>
		                        <td class="col-sm-4"><span data-bind="text: schemeAD"></span></td>
		                        <td class="table-divider"></td>
		                    </tr>
		                </table>
		                <br />
		                <div>More...&nbsp;&nbsp;&nbsp;<span class="linkADForm"></span></div>
		            </div>
		        </div>
		    </div>
		</div>
      </div>
    </div>
  </li>
</ul>

<ul class="collapsible" data-collapsible="accordion" id="ldb">
	<li>
    <div class="collapsible-noreplace header-bgcolor active"><i class="fa fa-list"></i>Loan Details<i class="fa fa-chevron-down pull-right"></i></div>
    <div class="collapsible-body row">
      <div class="col-sm-12">
				<div class="container-fluid">
				    <div class="row">
				        <div class="col-sm-12">
				            <div class="k-grid">
				                <table class="custom-label table-bordered">
				                    <tr>
				                        <td class="col-sm-2 text-bold">Proposed Limit Amount (Rs.Lacs)</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.proposedLimitAmount"></span></td>
				                        <td class="table-divider"></td>
				                        <td class="col-sm-2 text-bold">If Existing Customer</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.ifExistingCustomer"></span></td>
				                    </tr>
				                    <tr>
				                        <td class="col-sm-2 text-bold">Proposed Rate of Interest (ROI %)</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.proposedROI"></span></td>
				                        <td class="table-divider"></td>
				                        <td class="col-sm-2 text-bold">If Yes, Existing Limit Amount (Rs. Lacs)</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.ifYesExistingLimitAmount"></span></td>
				                    </tr>
				                    <tr>
				                        <td class="col-sm-2 text-bold">Proposed Pro Fee %</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.proposedProFee"></span></td>
				                        <td class="table-divider"></td>
				                        <td class="col-sm-2 text-bold">Existing ROI (%)</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.existingROI"></span></td>
				                    </tr>
				                    <tr>
				                        <td class="col-sm-2 text-bold">Limit Tenor (Months)</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.limitTenor"></span></td>
				                        <td class="table-divider"></td>
				                        <td class="col-sm-2 text-bold">Existing Processing Fee %</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.existingProcessingFee"></span></td>
				                    </tr>
				                    <tr>
				                        <td class="col-sm-2 text-bold">PO Backed</td>
				                        <td class="col-sm-4" data-bind="text:loanApproval.loanDetail.poBacked">&nbsp;</td>
				                        <td class="table-divider"></td>
				                        <td class="col-sm-2 text-bold">First Agreement Date</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.firstAgreementDate"></span></td>
				                    </tr>
				                    <tr>
				                        <td class="col-sm-2 text-bold">Project PO Value (Rs. Lacs)</td>
				                        <td class="col-sm-4" data-bind="text:loanApproval.loanDetail.projectPOValue">&nbsp;</td>
				                        <td class="table-divider"></td>
				                        <td class="col-sm-2 text-bold">Vintage With X10 (Months)</td>
				                        <td class="col-sm-4"><span data-bind="text: kendo.toString(loanApproval.loanDetail.vintageWithX10,'N0')"></span></td>
				                    </tr>
				                    <tr>
				                        <td class="col-sm-2 text-bold">Expected Payment from Project (120 Days)</td>
				                        <td class="col-sm-4" data-bind="text:loanApproval.loanDetail.expectedPayment">&nbsp;</td>
				                        <td class="table-divider"></td>
				                        <td class="col-sm-2 text-bold">Recent Agreement Date</td>
				                        <td class="col-sm-4"><span data-bind="text:loanApproval.loanDetail.recentAgreementDate"></span></td>
				                    </tr>
					                    <tr>
				                        <td class="col-sm-2 text-bold">X10 Interest Obligation (Rs Lacs)</td>
				                        <td class="col-sm-4" data-bind="text:loanApproval.loanDetail.x10Obligo">&nbsp;</td>
				                        <td class="table-divider"></td>
				                    </tr>
				                </table>
		                    <br>
		                    <div>More...&nbsp;&nbsp;&nbsp;<span class="linkADForm"></span></div>
				            </div>
				        </div>
				    </div>
				</div>
      </div>
    </div>
  </li>
</ul>

<ul class="collapsible" data-collapsible="accordion" id="ptb">
  <li>
    <div class="collapsible-noreplace header-bgcolor active"><i class="fa fa-list"></i>Payment Track<i class="fa fa-chevron-down pull-right"></i></div>
    <div class="collapsible-body row">
      <div class="col-sm-12">
				<!-- <div class="container-fluid">
				    <div class="row">
				        <div class="col-sm-12">
				            <div class="k-grid k-widget">
			                <table class="custom-label table-bordered">
			                    <thead class="k-grid-header">

			                    </thead>
			                    <tr>

			                    </tr>
			                    <tr>

			                    </tr>
			                    <tr>

			                    </tr>
			                    <tr>

			                    </tr>
			                    <tr>

			                    </tr>
			                    <tr>
			                        <td class="col-sm-2 text-bold">Average Delay Days (Highest)</td>
			                        <td class="col-sm-1 right"><span data-bind="text:loanApproval.paymentTrack.highestAverageDelay"></span></td>
			                        <td class="col-sm-2 text-bold" style="border: none;"></td>
			                        <td class="col-sm-1 right" style="border: none;"></td>
			                        <td class="col-sm-2 text-bold" style="border: none;"></td>
			                        <td class="col-sm-1 right" style="border: none;"></td>
			                    </tr>
			                </table>
			                <br>
			                <div>More...&nbsp;&nbsp;&nbsp;<span class="linkADForm"></span> , <span class="linkInternalRTRForm"></span></div>
				            </div>
				        </div>
				    </div>
				</div> -->
			<div class="container-fluid">
		    <div class="row">
		        <div class="col-sm-12">
		            <div class="k-grid k-widget">
		                <table>
		                    <thead class="k-grid-header">
		                        <tr>
		                            <th colspan="5" class="sub-bgcolor k-header ">
		                                Lead Distributor Payment Track
		                            </th>
		                            <th class="table-divider" rowspan="6"></th>
		                            <th colspan="2" class="sub-bgcolor k-header ">
		                                Finance Existing Customer Payment Track
		                            </th>
		                        </tr>
		                    </thead>
		                    <tr>
		                        <td class="col-sm-2 text-bold">Max Delay Days</td>
		                        <td class="col-sm-1 datacol text-center"><span data-bind="text:loanApproval.paymentTrack.maxdelaydays"></span></td>
		                        <td class="table-divider" rowspan="5"></td>
		                        <td class="col-sm-2 text-bold">Average Transaction Weighted Payment Delay Days</td>
		                        <td class="col-sm-1 text-center"><span data-bind="text:loanApproval.paymentTrack.averagetransactionpaymentdelay"></span></td>
		                        <td class="table-divider" rowspan="5"></td>
		                        <td class="col-sm-3 text-bold">Average Utilization of Existing Limit</td>
		                        <td class="col-sm-1 text-center" style="min-width: 100px;"><span>0</span></td>
		                    </tr>
		                    <tr>
		                        <td class="col-sm-2 text-bold">Max Payment Days</td>
		                        <td class="col-sm-1 text-center"><span data-bind="text:loanApproval.paymentTrack.maxpaymentdays"></span></td>
		                        <td class="col-sm-2 text-bold">Standard Deviation</td>
		                        <td class="col-sm-1 text-center"><span data-bind="text:loanApproval.paymentTrack.delaystandarddeviation"></span></td>
		                        <td class="col-sm-2 text-bold">Max DPD in Closed Loan in Days</td>
		                        <td class="col-sm-1 text-center"><span>0</span></td>
		                    </tr>
		                    <tr>
		                        <td class="col-sm-2 text-bold">Average Delay Days</td>
		                        <td class="col-sm-1 text-center"><span data-bind="text:loanApproval.paymentTrack.averagedelaydays"></span></td>
		                        <td class="col-sm-2 text-bold">Average Transaction Weighted Payment Days</td>
		                        <td class="col-sm-1 text-center"><span data-bind="text:loanApproval.paymentTrack.averagetransactionpayment"></span></td>
		                        <td class="col-sm-2 text-bold">Number of Instances of Delay Payment of Princial Repayment</td>
		                        <td class="col-sm-1 text-center"><span>0</span></td>
		                    </tr>
		                    <tr>
		                        <td class="col-sm-2 text-bold">Standard Deviation</td>
		                        <td class="col-sm-1 text-center"><span data-bind="text:loanApproval.paymentTrack.standarddeviation"></span></td>
		                        <td class="col-sm-2 text-bold">Standard Deviation</td>
		                        <td class="col-sm-1 text-center"><span data-bind="text:loanApproval.paymentTrack.daystandarddeviation"></span></td>
		                        <td class="col-sm-2 text-bold">Number of Instances of Early Closure of Principal Repayment</td>
		                        <td class="col-sm-1 text-center"><span>0</span></td>
		                    </tr>
		                    <tr>
		                        <td class="col-sm-2 text-bold">Average Payment Days</td>
			                        <td class="col-sm-1 text-center"><span data-bind="text:loanApproval.paymentTrack.averagepaymentdays"></span></td>
			                        <td class="col-sm-2 text-bold">Amount of Business Done in Last 12 Months With Lead Distributor in Lacs</td>
			                        <td class="col-sm-1 text-center"><span data-bind="text:loanApproval.paymentTrack.amountofbusiness"></span></td>
			                        <td class="col-sm-2 text-bold">Number of Instances of Payment on Due Date</td>
			                        <td class="col-sm-1 text-center"><span>0</span></td>
		                    </tr>
		                  <!--   <tr>
		                        <td class="col-sm-2 text-bold">Average Delay Days (Highest)</td>
		                        <td class="col-sm-2 text-center"><span data-bind="text:loanApproval.paymentTrack.highestAverageDelay"></span></td>
		                        <td class="dummy-td"></td>
		                        <td class="dummy-td"></td>
		                        <td class="dummy-td"></td>
		                        <td class="dummy-td"></td>
		                        <td class="dummy-td"></td>
		                        <td class="dummy-td"></td>
		                    </tr> -->
		                </table>
		            </div>
	                <br>
	                <div>More...&nbsp;&nbsp;&nbsp;<span class="linkADForm"></span> , <span class="linkInternalRTRForm"></span></div>
		        </div>
		    </div>
		</div>
      </div>
    </div>
  </li>
</ul>

<ul class="collapsible" data-collapsible="accordion" id="bdb">
  <li>
    <div class="collapsible-noreplace header-bgcolor active"><i class="fa fa-list"></i>Borrower Details<i class="fa fa-chevron-down pull-right"></i></div>
    <div class="collapsible-body row">
      <div class="col-sm-12">
        <div class="k-grid">
    		<div class="panel">
    			<div class="panel-heading">
					<h3 class="no-margin">
						Profile
					</h3>
				</div>
    			<div class="panel-body">
    				<table class="custom-label table-bordered">
		                <tr>
		                    <td class="col-sm-2 text-bold">Business Segment</td>
		                    <td class="col-sm-4"><span data-bind="text:loanApproval.borrowerDetails.customersegmentclasification"></span></td>

		                    <td class="table-divider"></td>

		                    <td class="col-sm-2 text-bold">Dependence on Suppliers</td>
		                    <td class="col-sm-4"><span data-bind="text:loanApproval.borrowerDetails.dependeceonsuppliers"></span></td>
		                </tr>
		                <tr>
		                    <td class="col-sm-2 text-bold">Business Since</td>
		                    <td class="col-sm-4"><span data-bind="text:loanapproval.businesssince"></span></td>

		                    <td class="table-divider"></td>

		                    <td class="col-sm-2 text-bold">Management</td>
		                    <td class="col-sm-4"><span data-bind="text:loanApproval.borrowerDetails.management"></span></td>
		                </tr>
		                <tr>
		                    <td class="col-sm-2 text-bold">Diversification: No. of Clients / Customer</td>
		                    <td class="col-sm-4"><span data-bind="text:loanApproval.borrowerDetails.diversificationcustomers"></span></td>
		                    <td class="table-divider"></td>
		                </tr>
	            	</table>
    			</div>
    		</div>

            <div class="panel">
				<div class="panel-heading">
					<h3 class="no-margin">
						Business Mix
					</h3>
				</div>
				<div class="panel-body">
					<div class="panel-row">
						<div class="col-sm-6 no-padding" style="margin-right: 1%">
							<table>
								<thead class="k-grid-header">
									<tr>
									  <th colspan="2" class="sub-bgcolor k-header">Customer Business Mix</th>
									</tr>
								</thead>
								<tr>
									<td class="col-sm-2 text-bold">Stock & Sell - in %</td>
									<td class="col-sm-2 text-center">
										<span data-bind="text:loanApproval.borrowerDetails.businessMix.stocksell"></span>
									</td>
								</tr>
								<tr>
									<td class="col-sm-2 text-bold">B2B - Govt.- in %</td>
									<td class="col-sm-2 text-center">
										<span data-bind="text:loanApproval.borrowerDetails.businessMix.govt"></span></td>
								</tr>
								<tr>
									<td class="col-sm-2 text-bold">B2B - Corporate  - in %</td>
									<td class="col-sm-2 text-center">
										<span data-bind="text:loanApproval.borrowerDetails.businessMix.corporate"></span>
									</td>
								</tr>
		              		</table>
		              	</div>

		              	<div class="col-sm-6 no-padding">
		              		<table>
		                  		<thead class="k-grid-header">
		                      		<tr>
		                          		<th colspan="2" class="sub-bgcolor k-header">Distributor Business Mix</th>
		                      		</tr>
		                  		</thead>
		                  		<tbody data-bind="foreach: loanApproval.borrowerDetails.businessMix.distributorMix.data">
		                  			<tr>
				                  		<td class="col-sm-2 text-bold" data-bind="text:Label"></td>
				                  		<td class="col-sm-2 text-center" data-bind="text:Result"></td>
		                  			</tr>
		                  		</tbody>
		              		</table>
		              	</div>
		            </div>

	              	<div class="col-md-12">
	              		<br>
	              		<div>More...&nbsp;&nbsp;&nbsp;<span class="linkADForm"></span></div>
	              	</div>
	            </div>
	        </div>
        </div>
      </div>
    </div>
  </li>
</ul>

<ul class="collapsible" data-collapsible="accordion" id="rrb">
  <li>
    <div class="collapsible-noreplace header-bgcolor active"><i class="fa fa-list"></i>Ratings, References & Compliance<i class="fa fa-chevron-down pull-right"></i></div>
    <div class="collapsible-body row">
      <div class="col-sm-12">
        <div class="k-grid">
            <div class="panel">
            	<!-- <div class="panel-body">
            		<div class="col-sm-6 no-padding">
		            	<table class="custom-label table-bordered">
		            		<tr>
		            			<td class="col-sm-2 text-bold">Overall Score</td>
				                <td class="col-sm-4 text-center"><span data-bind="text:loanApproval.ratingRef.OverallScore"></span></td>
		            		</tr>
		            		<tr>
		            			<td class="col-sm-2 text-bold">Internal Rating</td>
				                <td class="col-sm-4 text-center"><span data-bind="text:loanApproval.ratingRef.InternalRating"></span></td>
		            		</tr>
		            	</table>
		            </div>
            	</div> -->



				<div class="panel-heading">
					<h3 class="no-margin">
						Internal Rating
					</h3>
				</div>

				<div class="panel-body">
				<div class="row">

				<div class="col-sm-6 no-padding">
		            	<table class="custom-label table-bordered">
		            		<tr>
		            			<td class="col-sm-2 text-bold">Overall Score</td>
				                <td class="col-sm-4 text-center"><span data-bind="text:loanApproval.ratingRef.OverallScore"></span></td>
		            		</tr>
		            		<tr>
		            			<td class="col-sm-2 text-bold">Internal Rating</td>
				                <td class="col-sm-4 text-center"><span data-bind="text:loanApproval.ratingRef.InternalRating"></span></td>
		            		</tr>
		            	</table>
		            </div>
		            </div>
				<div class="row">

					<div class="col-sm-6 no-padding">
						<table class="custom-label table-bordered">
			                <tr>
			                    <td class="col-sm-2 text-bold">Industry & Business Risk</td>
			                    <td class="col-sm-4 text-center"><span data-bind="text:loanApproval.ratingRef.IndustryAndBusiness"></span></td>
			                </tr>
			                <tr>
			                    <td class="col-sm-2 text-bold">Management / Promoters Risk</td>
			                    <td class="col-sm-4 text-center"><span data-bind="text:loanApproval.ratingRef.ManagementPromotorsRisk"></span></td>
			                </tr>
			                <tr>
			                    <td class="col-sm-2 text-bold">Financial Risk</td>
			                    <td class="col-sm-4 text-center"><span data-bind="text:loanApproval.ratingRef.FinancialRisk"></span></td>
			                </tr>
			                <tr>
			                    <td class="col-sm-2 text-bold">Banking Risk</td>
			                    <td class="col-sm-4 text-center"><span data-bind="text:loanApproval.ratingRef.BankingRisk"></span></td>
			                </tr>
			       <!--          <tr>
			                		<td class="col-sm-2 text-bold">External Rating</td>
			                    <td class="col-sm-4"><span data-bind="text:loanApproval.ratingRef.AD.ExternalRating"></span></td>
			                </tr> -->
			            </table>
			        </div>
		        </div>
		        </div>
		        	<div class="panel-heading">
					<h3 class="no-margin">
						External Rating
					</h3>
				</div>
					<div class="panel-body">
				<div class="row">

				<div class="col-sm-6 no-padding">
					<table class="custom-label table-bordered">
	            		<td class="col-sm-2 text-bold">External Rating</td>
			                    <td class="col-sm-4"><span data-bind="text:loanApproval.ratingRef.AD.ExternalRating"></span></td>
	            	</table>
				</div>
				</div>
				</div>
		        <div style="margin-left: 15px;">
					<div>More...&nbsp;&nbsp;&nbsp;<span class="linkADForm"></span> , <span class="linkCreditScoreCard"></span></div>
				</div>
		    </div>

		    <div class="panel clearfix">
				<div class="panel-heading">
					<h3 class="no-margin">
						Commercial CIBIL Assessment
					</h3>
				</div>
				<div class="panel-body k-grid">
					<div class="col-sm-6 no-padding">
		              <table class="custom-label table-bordered">
		              	<tr>
		                    <td class="col-sm-2 text-bold">Rating</td>
		                    <td class="col-sm-4 text-center">
		                    	<span data-bind="text:loanApproval.ratingRef.Cibil.Rating"></span>
		                	</td>
		                </tr>
		              </table>
		            </div>
				</div>
				<div style="margin-left: 15px;">
					<div>More...&nbsp;&nbsp;&nbsp;<span class="linkCibilForm"></span></div>
				</div>
			</div>

			<div class="panel">
				<div class="panel-heading">
					<h3 class="no-margin">
						Background Check
					</h3>
				</div>
				<div class="panel-body">
					<script type="text/html" id="topcust-product-template">
					    <!-- ko if: loanApproval.companyBackgroundData().isEmptyMostLength -->
					        <tr>
					            <td class="col-sm-2 text-center text-bold">Top Customers Name</td>
					            <td class="col-sm-4"></td>
					            <td class="col-sm-2 text-center text-bold">Products</td>
					            <td class="col-sm-4""></td>
					        </tr>
					    <!-- /ko -->

					    <!-- ko ifnot: loanApproval.companyBackgroundData().isEmptyMostLength -->
					        <!-- ko foreach: loanApproval.companyBackgroundData().mostLength -->
					            <tr>
					                <!-- ko if: $index() == 0-->
					                    <td class="col-sm-2 text-center text-bold" data-bind="attr: { rowspan: loanApproval.companyBackgroundData().mostLength().length }">
					                        Top Customers Name
					                    </td>
					                    <td class="col-sm-4" data-bind="text: loanApproval.companyBackgroundData().topCustomersName()[$index()]"></td>
					                    <td class="col-sm-2 text-center text-bold" data-bind="attr: { rowspan: loanApproval.companyBackgroundData().mostLength().length }">
					                        Products
					                    </td>
					                    <td class="col-sm-4" data-bind="text: loanApproval.companyBackgroundData().topProducts()[$index()]"></td>
					                <!-- /ko -->
					                <!-- ko ifnot: $index() == 0 -->
					                    <td class="col-sm-4" data-bind="text: loanApproval.companyBackgroundData().topCustomersName()[$index()]"></td>
					                    <td class="col-sm-4" data-bind="text: loanApproval.companyBackgroundData().topProducts()[$index()]"></td>
					                <!-- /ko -->
					            </tr>
					        <!-- /ko -->
					    <!-- /ko -->
					</script>

					<script type="text/html" id="expansion-comment-template">
					    <!-- ko foreach: loanapproval.commentfinance -->
					        <tr>
					            <!-- ko if: $index() == 0-->
					                <td class="col-sm-2 center text-bold"
					                data-bind="attr: { rowspan: loanapproval.commentfinance().length }">
					                    Expansion Plan</td>
					                
					                <td class="col-sm-4" 
					                data-bind="attr: { rowspan: loanapproval.commentfinance().length }, 
					                text:loanapproval.expansionplan"></td>
					                
					                <td class="col-sm-2 center text-bold"
					                data-bind="attr: { rowspan: loanapproval.commentfinance().length }">
					                    Comments On Financial</td>
					            <!-- /ko -->
					            
					            <td class="col-sm-4 finance" data-bind="text: loanapproval.commentfinance()[$index()]"></td>
					        </tr>
					    <!-- /ko -->
					</script>

					<div class="container-fluid no-padding">
					    <div class="row">
					        <div class="col-sm-12">
					            <div id="compbackgrid"></div>
					        </div>
					    </div>
					    <br>
					    <div class="row">
					        <div class="col-sm-12">
					            <div class="k-grid">
					                <table class="table-bordered" style="word-break: break-word" data-bind="template: { name: 'topcust-product-template' }">
					                </table>
					            </div>
					        </div>
					    </div>
					    <div class="row">
					        <div class="col-sm-12">
					            <div class="k-grid">
					                <table class="table-bordered" data-bind="template: { name: 'expansion-comment-template' }">
					                </table>
					            </div>
					        </div>
					    </div>
					</div>
					<br>
					<div>More...&nbsp;&nbsp;&nbsp;<span class="linkADForm"></span></div>
				</div>
			</div>
			<div class="panel">
				<div class="panel-heading">
					<h3 class="no-margin">
						Reference Check
					</h3>
				</div>
				<div class="panel-body">
				    <div class="row">
				        <div class="col-sm-12">
				            <div class="k-grid col-sm-6 no-padding">
				                <table class="table-bordered">
				                    <tr>
				                        <td class="col-sm-4">Market Reference</td>
				                        <td class="col-sm-8">
				                            <center><span data-bind="text:loanapproval.marketref"></span></center>
				                        </td>
				                    </tr>
				                </table>
				            </div>
				        </div>
				    </div>
				    <div class="row">
				        <div class="col-sm-12">
				            <div id="referencecheckgrid"></div>
				        </div>
				    </div>
					<br>
      				<div>More...&nbsp;&nbsp;&nbsp;<span class="linkADForm"></span></div>
				</div>
			</div>
			<div class="panel">
				<div class="panel-heading">
					<h3 class="no-margin">
						Compliance & Verifications
					</h3>
				</div>
				<div class="panel-body">
					<div class="container-fluid no-padding">

						<div id="gridverification0"></div>
						&nbsp;
						<div id="gridDefaulterList0"></div>

					</div>

					<br>
					<div>More...&nbsp;&nbsp;&nbsp;<span class="linkDueDiligence"></span></div>
				</div>
			</div>
        </div>
      </div>
    </div>
  </li>
</ul>

<ul class="collapsible" data-collapsible="accordion" id="kpib">
	<li>
    <div class="collapsible-noreplace header-bgcolor active"><i class="fa fa-list"></i>Key Policy Parameters<i class="fa fa-chevron-down pull-right"></i></div>
    <div class="collapsible-body row">
      <div class="col-sm-12">
				<div class="container-fluid">
				    <div class="row">
				        <div class="col-sm-12">
				            <div class="k-grid">
				                <div class="container-fluid no-padding">
								    <div class="row">
								        <div class="col-sm-12">
								            <div id="gridKeyParametersandIndicators">
								            </div>
								        </div>
								    </div>
								</div>
		                    <br>
		                    <div>More...&nbsp;&nbsp;&nbsp;<span class="linkKeyFinancialReport"></span>, &nbsp;<span class="linkCibilForm"></span></div>
				            </div>
				        </div>
				    </div>
				</div>
      </div>
    </div>
  </li>
</ul>

<ul class="collapsible" data-collapsible="accordion" id="kfrb">
	<li>
    <div class="collapsible-noreplace header-bgcolor active"><i class="fa fa-list"></i>Key Financial Ratios<i class="fa fa-chevron-down pull-right"></i></div>
    <div class="collapsible-body row">
      <div class="col-sm-12">
				<div class="container-fluid">
				    <div class="row">
				        <div class="col-sm-12">
				            <div class="k-grid">
				                <div class="container-fluid no-padding">
												    <div class="row">
												        <div class="col-sm-12" style="padding-bottom: 10px">
												        	<div class="col-sm-6 no-padding">
												        		<div id="gridLeverageRatios"></div>
												        	</div>
												        	<div class="col-sm-6" style="padding-right: 0">
												        		<div id="gridOperatingRatios"></div>
												        	</div>
												        </div>
												        <br>
												        <div class="col-sm-12" style="padding-bottom: 10px">
												        	<div class="col-sm-6 no-padding">
												        		<div id="gridCoverageRatios"></div>
												        	</div>
												        	<div class="col-sm-6" style="padding-right: 0">
												        		<div id="gridLiquidityRatios"></div>
												        	</div>
												        </div>
												        <div class="col-sm-12">
												        	<div id="gridKeyRatios"></div>
												        </div>
												    </div>
												</div>
		                    <br>
		                    <div>More...&nbsp;&nbsp;&nbsp;<span class="linkKeyFinancialReport"></span></div>
				            </div>
				        </div>
				    </div>
				</div>
      </div>
    </div>
  </li>
</ul>

<ul class="collapsible" data-collapsible="accordion" id="kfpb">
	<li>
    <div class="collapsible-noreplace header-bgcolor active"><i class="fa fa-list"></i>Key Financial Parameters<i class="fa fa-chevron-down pull-right"></i></div>
    <div class="collapsible-body row">
      <div class="col-sm-12">
				<div class="container-fluid">
				    <div class="row">
				        <div class="col-sm-12">
				            <div class="k-grid">
				                <div class="container-fluid no-padding">
												    <div class="row">
											        <div class="col-sm-12">
											        	<div class="col-sm-6 no-padding">
											        		<div id="gridPnL"></div>
											        	</div>
											        	<div class="col-sm-6" style="padding-right: 0">
											        		<div id="gridBalanceSheet"></div>
											        	</div>
											        </div>
												    </div>
												</div>
		                    <br>
		                    <div>More...&nbsp;&nbsp;&nbsp;<span class="linkKeyFinancialReport"></span></div>
				            </div>
				        </div>
				    </div>
				</div>
      </div>
    </div>
  </li>
</ul>

<ul class="collapsible" data-collapsible="accordion" id="pmdb">
	<li>
    <div class="collapsible-noreplace header-bgcolor active"><i class="fa fa-list"></i>Promoter & Management Details<i class="fa fa-chevron-down pull-right"></i></div>
    <div class="collapsible-body row">
      <div class="col-sm-12">
				<div class="container-fluid">
				    <div class="row">
				        <div class="col-sm-12">
				            <div class="k-grid">
				            		<div id="gridCibilDetails"></div>
				            		<br>
				            		<div>More...&nbsp;&nbsp;&nbsp;<span class="linkCibilForm"></span></div>
				            </div>
				        </div>
				    </div>
				</div>
				<br><br>
				<div class="container-fluid">
				    <div class="row">
				        <div class="col-sm-12">
				            <div class="k-grid">
				            		<div id="gridRedFlags"></div>
                				<br>
                				<div>More...&nbsp;&nbsp;&nbsp;<span class="linkDueDiligence"></span></div>
				            </div>
				        </div>
				    </div>
				</div>
				<br><br>
				<div class="container-fluid">
				    <div class="row">
				        <div class="col-sm-12">
				            <div class="k-grid">
				            		<div id="gridMainPromotorDetails"></div>
                				<br>
                				<div>More...&nbsp;&nbsp;&nbsp;<span class="linkADForm"></span>, &nbsp;<span class="linkPromoter"></span>, &nbsp;<span class="linkProperty"></span></div>
				            </div>
				        </div>
				    </div>
				</div>
      </div>
    </div>
  </li>
</ul>

<ul class="collapsible" data-collapsible="accordion" id="bosb">
	<li>
		<div class="collapsible-noreplace header-bgcolor active"><i class="fa fa-list"></i>Banking & O/S Snapshot<i class="fa fa-chevron-down pull-right"></i></div>
		<div class="collapsible-body row">
      	<div class="col-sm-12">
			<div class="container-fluid">
			    <div class="row">
			        <div class="col-sm-12">
				        <div class="k-grid k-widget">
				        	<div id="gridOutstandingDebt" ></div>
				        </div>
			      		<br />
			      		<div>More...&nbsp;&nbsp;&nbsp;<span class="linkExternalRepaymentTrack"></span></div>
			      		<br />
			        </div>
			    </div>
			</div>
			<div class="container-fluid">
				<div class="row">
					<div class="col-sm-12">
						<div class="k-grid k-widget">
							<div id="gridBankingDetails" ></div>
						</div>
			      		<br />
						<div>More...&nbsp;&nbsp;&nbsp;<span class="linkBankingAnalysis"></span></div>
					</div>
				</div>
			</div>
      </div>
    </div>
  </li>
</ul>

<script type="text/javascript">
	$(document).ready(function(){
		$(".collapsible-header.header-bgcolor.active").trigger("click")
	})
</script>